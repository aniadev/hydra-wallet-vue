System.register("chunks:///_virtual/AudioControl.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){var i,e,t,r,n,u,c,l,a;return{setters:[function(o){i=o.applyDecoratedDescriptor,e=o.inheritsLoose,t=o.initializerDefineProperty,r=o.assertThisInitialized},function(o){n=o.cclegacy,u=o._decorator,c=o.AudioClip,l=o.AudioSource,a=o.Component}],execute:function(){var p,s,d,h,f,y,S;n._RF.push({},"c6ccc8x4ZdKmYWUE3j7lnoU","AudioControl",void 0);var A=u.ccclass,v=u.property;o("AudioControl",(p=A("AudioControl"),s=v({type:[c],tooltip:"place audio clip here"}),d=v({type:l,tooltip:"place audio node here"}),p((y=i((f=function(o){function i(){for(var i,e=arguments.length,n=new Array(e),u=0;u<e;u++)n[u]=arguments[u];return i=o.call.apply(o,[this].concat(n))||this,t(i,"clips",y,r(i)),t(i,"audioSource",S,r(i)),i}e(i,o);var n=i.prototype;return n.onAudioQueue=function(o){var i=this.clips[o];this.audioSource.playOneShot(i)},n.onAudioLoop=function(o){var i=this.clips[o];this.audioSource.clip=i,this.audioSource.loop=!0,this.audioSource.play()},n.onAudioStop=function(){this.audioSource.stop()},i}(a)).prototype,"clips",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),S=i(f.prototype,"audioSource",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=f))||h));n._RF.pop()}}}));

System.register("chunks:///_virtual/Avatar.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,r,a,i,n,o,l,u,p,c,s;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,a=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){n=t.cclegacy,o=t._decorator,l=t.SpriteFrame,u=t.Sprite,p=t.assetManager,c=t.Texture2D,s=t.Component}],execute:function(){var v,f,S,b,d,h,y,g,m;n._RF.push({},"2e653W99NFKOqeiFEAqWwOS","Avatar",void 0);var A=o.ccclass,w=o.property;t("Avatar",(v=A("Avatar"),f=w(l),S=w(l),b=w(u),v((y=e((h=function(t){function e(){for(var e,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return e=t.call.apply(t,[this].concat(n))||this,a(e,"borderSprite",y,i(e)),a(e,"defaultAvatarSprite",g,i(e)),a(e,"avatarSprite",m,i(e)),e}r(e,t);var n=e.prototype;return n.start=function(){},n.update=function(t){},n.setAvatar=function(t){var e=this;console.log("Set avatar",t),t&&""!==t?p.loadRemote(t,(function(t,r){if(t)console.error("Lỗi khi tải avatar:",t);else if(e.avatarSprite){var a=new l,i=new c;i.image=r,a.texture=i,e.avatarSprite.spriteFrame=a}})):this.avatarSprite.spriteFrame=this.defaultAvatarSprite},e}(s)).prototype,"borderSprite",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=e(h.prototype,"defaultAvatarSprite",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=e(h.prototype,"avatarSprite",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=h))||d));n._RF.pop()}}}));

System.register("chunks:///_virtual/backgroundRunner.ts",["cc"],(function(n){var e,t,u;return{setters:[function(n){e=n.cclegacy,t=n.game,u=n.director}],execute:function(){e._RF.push({},"3663ahWq/ZJxaVL/vCEcEal","backgroundRunner",void 0);var a=n("BackgroundRunner",function(){function n(){}return n.enableBackgroundRunning=function(n){var e=this;this.isRunning||(this.isRunning=!0,this.updateCallback=n,t.pause=function(){console.log("Game pause prevented")},t.resume=function(){console.log("Game resume triggered"),u.getScheduler().resumeTarget(u.getScheduler())},this.lastTime=performance.now(),this.updateInterval=window.setInterval((function(){var n=performance.now(),t=Math.min((n-e.lastTime)/1e3,.1);e.lastTime=n,e.updateCallback&&e.updateCallback(t)}),1e3/60),window.addEventListener("focus",(function(){console.log("Tab focused, syncing time"),e.lastTime=performance.now(),t.resume()})),window.addEventListener("blur",(function(){console.log("Tab blurred, keeping game running")})))},n.disableBackgroundRunning=function(){this.isRunning&&(this.isRunning=!1,this.updateInterval&&(window.clearInterval(this.updateInterval),this.updateInterval=null),this.updateCallback=null,t.pause=function(){return u.pause()},t.resume=function(){return u.resume()},window.removeEventListener("focus",(function(){})),window.removeEventListener("blur",(function(){})))},n}());a.isRunning=!1,a.updateInterval=null,a.lastTime=0,a.updateCallback=null,e._RF.pop()}}}));

System.register("chunks:///_virtual/base.ts",["./rollupPluginModLoBabelHelpers.js","cc","./mitt.mjs"],(function(t){var e,n,i,o,s;return{setters:[function(t){e=t.createClass,n=t.asyncToGenerator,i=t.regeneratorRuntime},function(t){o=t.cclegacy},function(t){s=t.default}],execute:function(){o._RF.push({},"a9f40mlHq1GH7YtBVHPh/jQ","base",void 0);t("BaseInteraction",function(){function t(t){this.emitter=s(),this.options={eventName:"game-interaction"},this.onMessage=n(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),this.options=null!=t?t:this.options}return t.prototype.emit=function(t){this.emitter.emit(this.eventName,t)},e(t,[{key:"eventName",get:function(){return this.options.eventName}}]),t}());o._RF.pop()}}}));

System.register("chunks:///_virtual/BaseButton.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,o,l,r,i,n,a,u,c,s,b,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,l=e.initializerDefineProperty,r=e.assertThisInitialized,i=e.createClass},function(e){n=e.cclegacy,a=e._decorator,u=e.Label,c=e.Button,s=e.Node,b=e.Component,p=e.Color}],execute:function(){var d,f,h,C,g,y,w,v,m,z,B,L,O,_,x,T,D,E,M;n._RF.push({},"a8307/wCGlCLosQMuoCPMRG","BaseButton",void 0);var H=a.ccclass,P=a.property;e("BaseButton",(d=H("BaseButton"),f=P(u),h=P(c),C=P({tooltip:"default text color",group:"Label's color"}),g=P({tooltip:"disabled text color",group:"Label's color"}),y=P({tooltip:"hovered text color",group:"Label's color"}),w=P({tooltip:"pressed text color",group:"Label's color"}),v=P({tooltip:"default outline color",group:"Label's outline color"}),m=P({tooltip:"disabled outline color",group:"Label's outline color"}),d((L=t((B=function(e){function t(){for(var t,o=arguments.length,i=new Array(o),n=0;n<o;n++)i[n]=arguments[n];return t=e.call.apply(e,[this].concat(i))||this,l(t,"label",L,r(t)),l(t,"button",O,r(t)),l(t,"defaultColor",_,r(t)),l(t,"disabledColor",x,r(t)),l(t,"hoveredColor",T,r(t)),l(t,"pressedColor",D,r(t)),l(t,"defaultOutlineColor",E,r(t)),l(t,"disabledOutlineColor",M,r(t)),t}o(t,e);var n=t.prototype;return n.start=function(){var e=this;this.node.on(s.EventType.TOUCH_MOVE,(function(){e.interactable&&(e.label.color=e.hoveredColor)}),this),this.node.on(s.EventType.TOUCH_END,(function(){e.interactable&&(e.label.color=e.pressedColor)}),this),this.interactable=this.button.interactable},n.update=function(e){},i(t,[{key:"interactable",get:function(){return this.button.interactable},set:function(e){e?(this.button.interactable=!0,this.label.color=this.defaultColor,this.label.outlineColor=this.defaultOutlineColor):(this.button.interactable=!1,this.label.color=this.disabledColor,this.label.outlineColor=this.disabledOutlineColor)}}]),t}(b)).prototype,"label",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(B.prototype,"button",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(B.prototype,"defaultColor",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new p("#256605")}}),x=t(B.prototype,"disabledColor",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new p("#999999")}}),T=t(B.prototype,"hoveredColor",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new p("#499722")}}),D=t(B.prototype,"pressedColor",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new p("#499722")}}),E=t(B.prototype,"defaultOutlineColor",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new p("#499722")}}),M=t(B.prototype,"disabledOutlineColor",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new p("#999999")}}),z=B))||z));n._RF.pop()}}}));

System.register("chunks:///_virtual/BaseModal.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,n,o,s,l,r,a,c,u,h,v;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized,s=t.createClass},function(t){l=t.cclegacy,r=t._decorator,a=t.Button,c=t.Node,u=t.math,h=t.tween,v=t.Component}],execute:function(){var f,b,p,d,y,g,C,_,m;l._RF.push({},"3bfe8sqGAtE9rEE/5461Jqr","BaseModal",void 0);var w=r.ccclass,B=r.property;t("BaseModal",(f=w("BaseModal"),b=B(a),p=B(c),d=B(c),f((C=e((g=function(t){function e(e){var i;return i=t.call(this)||this,n(i,"buttonClose",C,o(i)),n(i,"overlay",_,o(i)),n(i,"content",m,o(i)),i.isVisible=!1,i._configs={},i._configs=e,i}i(e,t);var l=e.prototype;return l.start=function(){var t,e,i,n=this;(console.log("BaseModal start",this._configs,this.buttonClose),this.buttonClose)&&(this.buttonClose.interactable=!(null==(t=this._configs)||!t.showCloseButton),this.buttonClose.node.active=!(null==(e=this._configs)||!e.showCloseButton),this.buttonClose.node.on(c.EventType.TOUCH_END,(function(){n.hide()}),this));this.overlay&&(this.overlay.active=!(null==(i=this._configs)||!i.showOverlay))},l.update=function(t){},l.show=function(){var t;this.node.active=!0,this.overlay.active=!(null==(t=this._configs)||!t.showOverlay),this.content.scale=u.v3(0,0,0);var e=this;h(this.content).to(.35,{scale:u.v3(1,1,1)},{easing:"cubicInOut",onComplete:function(t){e.isVisible=!0,e.node.emit("open")}}).start()},l.hide=function(){var t=this;this.overlay.active=!1,this.content.scale=u.v3(1,1,1),h(this.content).to(.35,{scale:u.v3(0,0,0)},{easing:"cubicInOut",onComplete:function(e){t.node.active=!1,t.isVisible=!1,t.node.emit("close")}}).start()},s(e,[{key:"visible",get:function(){return this.isVisible}}]),e}(v)).prototype,"buttonClose",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(g.prototype,"overlay",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=e(g.prototype,"content",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=g))||y));l._RF.pop()}}}));

System.register("chunks:///_virtual/chain.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"2652dPtkcBLZKSLZmr8DNW3","chain",void 0);e("CHAIN",{name:"cardano",symbol:"t₳",symbolName:"tADA",decimals:6,native:"lovelace",network:"testnet preprod",networkId:1});t._RF.pop()}}}));

System.register("chunks:///_virtual/ChatManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./MessageItem.ts"],(function(t){var n,e,i,a,o,r,l,u,s,c,h,p,f,d;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,l=t.EditBox,u=t.Button,s=t.ScrollView,c=t.Prefab,h=t.Node,p=t.instantiate,f=t.Component},function(t){d=t.MessageItem}],execute:function(){var g,b,I,C,m,v,y,B,E,S,T;o._RF.push({},"dfa2aHeGWhI0qX5CBq/NLYO","ChatManager",void 0);var w=r.ccclass,M=r.property;t("ChatManager",(g=w("ChatManager"),b=M(l),I=M(u),C=M(s),m=M(c),g((B=n((y=function(t){function n(){for(var n,e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];return n=t.call.apply(t,[this].concat(o))||this,i(n,"chatInput",B,a(n)),i(n,"chatSendButton",E,a(n)),i(n,"scrollView",S,a(n)),i(n,"messageItemPrefab",T,a(n)),n}e(n,t);var o=n.prototype;return o.start=function(){},o.update=function(t){},o.onLoad=function(){},o.onEnable=function(){var t,n;null==(t=this.chatSendButton)||null==(t=t.node)||t.on(h.EventType.TOUCH_END,this.onClickSendButton,this),null==(n=this.chatInput)||null==(n=n.node)||n.on(l.EventType.TEXT_CHANGED,this.onInputChat,this),this.scrollView.content.removeAllChildren()},o.onDisable=function(){var t,n;null==(t=this.chatSendButton)||null==(t=t.node)||t.off(h.EventType.TOUCH_END,this.onClickSendButton,this),null==(n=this.chatInput)||null==(n=n.node)||n.off(l.EventType.TEXT_CHANGED,this.onInputChat,this)},o.onClickSendButton=function(){var t;null!=(t=this.chatInput)&&t.string&&(this.node.emit("send-message",this.chatInput.string),this.clearInput())},o.clearInput=function(){this.chatInput.string="",this.chatSendButton.interactable=!1},o.onInputChat=function(){var t;null!=(t=this.chatInput)&&t.string?this.chatSendButton.interactable=!0:this.chatSendButton.interactable=!1},o.addMessage=function(t,n){var e,i=p(this.messageItemPrefab);null==(e=i.getComponent(d))||e.setMessage(t,n),this.scrollView.content.addChild(i)},n}(f)).prototype,"chatInput",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=n(y.prototype,"chatSendButton",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=n(y.prototype,"scrollView",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=n(y.prototype,"messageItemPrefab",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=y))||v));o._RF.pop()}}}));

System.register("chunks:///_virtual/choice.type.ts",["cc"],(function(c){var e;return{setters:[function(c){e=c.cclegacy}],execute:function(){e._RF.push({},"49fffSO48NOLJv9DBvRTAJv","choice.type",void 0);c("Choice",function(c){return c.None="NONE",c.Rock="ROCK",c.Paper="PAPER",c.Scissors="SCISSORS",c}({}));e._RF.pop()}}}));

System.register("chunks:///_virtual/ChoiceBtnScript.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioControl.ts"],(function(t){var e,n,o,i,l,c,r,a,u,s,f,d,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized,l=t.createClass},function(t){c=t.cclegacy,r=t._decorator,a=t.Button,u=t.Node,s=t.tween,f=t.math,d=t.Component},function(t){h=t.AudioControl}],execute:function(){var p,b,C,y,v,E,S,_,k;c._RF.push({},"0bfeeixh0FKXKEsy6jEk+G3","ChoiceBtnScript",void 0);var g=r.ccclass,N=r.property;t("ChoiceBtnScript",(p=g("ChoiceBtnScript"),b=N(a),C=N(u),y=N({type:h,tooltip:"add audio controller"}),p((S=e((E=function(t){function e(){for(var e,n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return e=t.call.apply(t,[this].concat(l))||this,o(e,"button",S,i(e)),o(e,"effectNode",_,i(e)),o(e,"audioControl",k,i(e)),e.isSelected=!1,e._interactable=!0,e._onClickCallback=void 0,e}n(e,t);var c=e.prototype;return c.start=function(){},c.onLoad=function(){console.log("onLoad ")},c.onEnable=function(){var t,e,n,o=this;this.effectNode&&(this.effectNode.active=this.isSelected,null==(t=this.button)||null==(t=t.node)||t.on(u.EventType.TOUCH_END,this._onClickCallback,this),null==(e=this.button)||null==(e=e.node)||e.on(u.EventType.MOUSE_ENTER,(function(){s(o.button.node).to(.1,{scale:f.v3(1.1,1.1,1.1)}).start()}),this),null==(n=this.button)||null==(n=n.node)||n.on(u.EventType.MOUSE_LEAVE,(function(){s(o.button.node).to(.1,{scale:f.v3(1,1,1)}).start()}),this))},c.update=function(t){},c.setSelected=function(t){this.isSelected=t,this.effectNode&&(this.effectNode.active=this.isSelected,this.isSelected&&this.audioControl.onAudioQueue(3))},c.onClick=function(t){this._onClickCallback=t},l(e,[{key:"interactable",get:function(){return this._interactable},set:function(t){this._interactable=t,this.button&&(this.button.interactable=t)}}]),e}(d)).prototype,"button",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(E.prototype,"effectNode",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(E.prototype,"audioControl",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=E))||v));c._RF.pop()}}}));

System.register("chunks:///_virtual/ChoiceFrame.ts",["./rollupPluginModLoBabelHelpers.js","cc","./choice.type.ts"],(function(e){var i,r,t,a,o,s,n,c,p,l,d;return{setters:[function(e){i=e.applyDecoratedDescriptor,r=e.inheritsLoose,t=e.initializerDefineProperty,a=e.assertThisInitialized,o=e.createClass},function(e){s=e.cclegacy,n=e._decorator,c=e.SpriteFrame,p=e.Sprite,l=e.Component},function(e){d=e.Choice}],execute:function(){var h,u,b,m,f,C,F;s._RF.push({},"0ba76vN+XdASYOS5prcdsaK","ChoiceFrame",void 0);var S=n.ccclass,y=n.property;e("ChoiceFrame",(h=S("ChoiceFrame"),u=y({type:[c],tooltip:"add sprite frames: [rock, paper, scissors]",max:3,min:3}),b=y({type:[c],tooltip:"add disabled sprite frames: [rock, paper, scissors]",max:3,min:3}),h((C=i((f=function(e){function i(){for(var i,r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return i=e.call.apply(e,[this].concat(o))||this,t(i,"enabledChoiceSpriteFrames",C,a(i)),t(i,"disabledChoiceSpriteFrames",F,a(i)),i}r(i,e);var s=i.prototype;return s.onEnable=function(){},s.update=function(e){},s.showChoice=function(e,i){if(void 0===i&&(i=!1),this.node){var r=this.node.getComponent(p);r&&(r.spriteFrame=i?this.choiceMapper[e].disabled:this.choiceMapper[e].enabled)}},o(i,[{key:"choiceMapper",get:function(){var e;return(e={})[d.None]={enabled:null,disabled:null},e[d.Rock]={enabled:this.enabledChoiceSpriteFrames[0],disabled:this.disabledChoiceSpriteFrames[0]},e[d.Paper]={enabled:this.enabledChoiceSpriteFrames[1],disabled:this.disabledChoiceSpriteFrames[1]},e[d.Scissors]={enabled:this.enabledChoiceSpriteFrames[2],disabled:this.disabledChoiceSpriteFrames[2]},e}}]),i}(l)).prototype,"enabledChoiceSpriteFrames",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),F=i(f.prototype,"disabledChoiceSpriteFrames",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m=f))||m));s._RF.pop()}}}));

System.register("chunks:///_virtual/config.ts",["cc"],(function(c){var e;return{setters:[function(c){e=c.cclegacy}],execute:function(){e._RF.push({},"6992cWccoNA5Kvi53nSaSJo","config",void 0);c("default",{baseApiUrl:"https://rps-api.hexcore.io.vn",socketioWsUrl:"wss://rps-api.hexcore.io.vn/game"});e._RF.pop()}}}));

System.register("chunks:///_virtual/CountdownController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./mitt.mjs","./AudioControl.ts"],(function(t){var i,n,e,o,r,a,l,u,s,c,d,p,h;return{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.inheritsLoose,e=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,l=t.Node,u=t.Prefab,s=t.SpriteFrame,c=t.Sprite,d=t.Component},function(t){p=t.default},function(t){h=t.AudioControl}],execute:function(){var f,m,g,b,_,w,y,C,S,v,F,T,z,D,L,M,R;r._RF.push({},"a2d47sSJmtM0LLVl4p/QleX","CountdownController",void 0);var x=a.ccclass,A=a.property;t("CountdownController",(f=x("CountdownController"),m=A(l),g=A(u),b=A([s]),_=A(l),w=A(l),y=A(l),C=A({type:h,tooltip:"add audio controller"}),f((F=i((v=function(t){function i(){for(var i,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return i=t.call.apply(t,[this].concat(r))||this,e(i,"NumberLayout",F,o(i)),e(i,"numberPrefab",T,o(i)),e(i,"digitFrames",z,o(i)),e(i,"digitSlot1",D,o(i)),e(i,"digitSlot2",L,o(i)),e(i,"digitSlot3",M,o(i)),e(i,"clip",R,o(i)),i._digitSlots=[],i._isRunning=!1,i._startTime=performance.now(),i._duration=30,i._timer=null,i._emitter=p(),i._onFinishCb=void 0,i}n(i,t);var r=i.prototype;return r.start=function(){},r.update=function(t){},r.show=function(){this.node.active=!0},r.hide=function(){this.node.active=!1},r.onEnable=function(){console.log("onEnabled"),this._digitSlots=[this.digitSlot1,this.digitSlot2,this.digitSlot3],this.setTime(30)},r.onDisable=function(){this._emitter.all.clear()},r.setTime=function(t){t>999?console.log("Time is too long, max is 999"):(this._startTime=performance.now(),this._duration=t,this.updateDisplay())},r.startCoundown=function(t){this._isRunning||(this._isRunning=!0,this.clip.onAudioLoop(4),this._startTime=performance.now(),this.schedule(this.updateTimer,.1),this._onFinishCb=t)},r.updateTimer=function(t){this.updateDisplay()},r.stopCountdown=function(){this._isRunning=!1,this.clip.onAudioStop(),this.unschedule(this.updateTimer)},r.updateDisplay=function(){var t,i=(performance.now()-this._startTime)/1e3,n=Math.max(0,Math.floor(this._duration-i)),e=Math.abs(n).toFixed(0).toString(),o="";this._duration<100?(o=e.padStart(2,"0"),this.digitSlot3.active=!1):(o=e.padStart(3,"0"),this.digitSlot3.active=!0);for(var r=0;r<o.length;r++){var a=parseInt(o[r]),l=this._digitSlots[r];if(l){var u=l.getComponentInChildren(c);u&&(u.spriteFrame=this.digitFrames[a])}}n<=0&&(this.stopCountdown(),this._emitter.emit("countdown",{type:"onCountdownEnd"}),null==(t=this._onFinishCb)||t.call(this))},r.onFinish=function(t){this._onFinishCb=t},r.getCurrentTime=function(){var t=(performance.now()-this._startTime)/1e3;return Math.max(0,this._duration-t)},i}(d)).prototype,"NumberLayout",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=i(v.prototype,"numberPrefab",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=i(v.prototype,"digitFrames",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),D=i(v.prototype,"digitSlot1",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=i(v.prototype,"digitSlot2",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=i(v.prototype,"digitSlot3",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=i(v.prototype,"clip",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=v))||S));r._RF.pop()}}}));

System.register("chunks:///_virtual/currency.type.ts",["./rollupPluginModLoBabelHelpers.js","cc","./bignumber.mjs_cjs=&original=.js","./chain.ts","./bignumber.js"],(function(t){var n,e,i,u;return{setters:[function(t){n=t.createClass},function(t){e=t.cclegacy},null,function(t){i=t.CHAIN},function(t){u=t.default}],execute:function(){e._RF.push({},"ac96aUFk5tL3Y58CWdV1BTh","currency.type",void 0);t("CurrencyBalance",function(){function t(t,n){this.chain=i,this.currency=t,this.amount=n,this.currency=t,this.amount=n}return t.prototype.toAda=function(t){void 0===t&&(t=!1);var n=null;return n=this.currency.symbol===i.native?u(this.amount).dividedBy(1e6):u(this.amount).dividedBy(Math.pow(10,this.currency.decimals)),t?n.toFormat()+" "+i.symbol:n.toFormat()},n(t,[{key:"valueInUsd",get:function(){return u(this.amount).multipliedBy(this.currency.usdPrice)}}]),t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/game.type.ts",["cc"],(function(t){var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"d77d8oLNwlNtrcsKSG5sY31","game.type",void 0);t("GameState",function(t){return t.WaitingForPlayers="WaitingForPlayers",t.WaitingForChoices="WaitingForChoices",t.CommittingChoices="CommittingChoices",t.RevealingChoices="RevealingChoices",t.WaitingForPayout="WaitingForPayout",t.ShowRoundResult="ShowRoundResult",t.WaitingForNextRound="WaitingForNextRound",t}({}));i._RF.pop()}}}));

System.register("chunks:///_virtual/GamePlayManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./choice.type.ts","./PrimaryBtn.ts","./AudioControl.ts","./ChoiceBtnScript.ts","./CountdownController.ts","./Navigation.ts","./RoundResultController.ts","./Player2.ts","./backgroundRunner.ts","./socket-client.ts","./ModalReconnect.ts","./game.type.ts","./currency.type.ts","./ChatManager.ts","./useFormat.ts"],(function(e){var t,o,i,a,n,r,l,s,c,h,u,d,p,y,m,g,C,f,B,R,A,S,b,v,k,N;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized,n=e.createClass},function(e){r=e.cclegacy,l=e._decorator,s=e.Node,c=e.director,h=e.sys,u=e.Component},function(e){d=e.Choice},function(e){p=e.PrimaryBtn},function(e){y=e.AudioControl},function(e){m=e.ChoiceBtnScript},function(e){g=e.CountdownController},function(e){C=e.Navigation},function(e){f=e.RoundResultController},function(e){B=e.Player},function(e){R=e.BackgroundRunner},function(e){A=e.socketClient},function(e){S=e.ModalReconnect},function(e){b=e.GameState},function(e){v=e.CurrencyBalance},function(e){k=e.ChatManager},function(e){N=e.formatString}],execute:function(){var M,G,w,E,P,I,_,D,O,T,W,z,F,x,L,U,H,J,V,Y,j,Q,K,q,X,Z,$,ee,te;r._RF.push({},"d1f21uxyl5GurDUcVlHK2jb","GamePlayManager",void 0);var oe=l.ccclass,ie=l.property;e("GamePlayManager",(M=oe("GamePlayManager"),G=ie({type:p,tooltip:"add primary btn"}),w=ie({type:C,tooltip:"add navigation"}),E=ie(s),P=ie(S),I=ie({type:k,tooltip:"add chat manager"}),_=ie({type:y,tooltip:"add audio controller"}),D=ie(s),O=ie(s),T=ie(s),W=ie({type:g,tooltip:"add countdown controller"}),z=ie({type:f,tooltip:"add round result controller"}),F=ie({type:B,tooltip:"add player A"}),x=ie({type:B,tooltip:"add player B"}),M((H=t((U=function(e){function t(){for(var t,o,n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return o=e.call.apply(e,[this].concat(r))||this,i(o,"primaryBtn",H,a(o)),i(o,"nav",J,a(o)),i(o,"uiController",V,a(o)),i(o,"modalReconnect",Y,a(o)),i(o,"chatManager",j,a(o)),i(o,"clip",Q,a(o)),i(o,"rockBtnNode",K,a(o)),i(o,"paperBtnNode",q,a(o)),i(o,"scissorsBtnNode",X,a(o)),i(o,"countdownController",Z,a(o)),i(o,"roundResultController",$,a(o)),i(o,"playerA",ee,a(o)),i(o,"playerB",te,a(o)),o._gameState=void 0,o.choiceMapper=((t={})[d.None]=null,t[d.Rock]=o.rockBtnNode,t[d.Paper]=o.paperBtnNode,t[d.Scissors]=o.scissorsBtnNode,t),o.socketRoom="",o.currentRoom=null,o.currentGame=null,o.selectedChoice=d.Rock,o.readyWatcher=void 0,o}o(t,e);var r=t.prototype;return r.start=function(){console.log("[GamePlayManager][start]")},r.onLoad=function(){R.enableBackgroundRunning((function(e){c.getScheduler().update(e)}))},r.onEnable=function(){var e,t,o=this;console.log("[GamePlayManager][onEnable]"),this.socketRoom=h.localStorage.getItem("socket-room")||"",this.socketRoom?(this.currentRoom=JSON.parse(h.localStorage.getItem("currentRoom")||"null"),this.currentRoom?(this.currentGame=JSON.parse(h.localStorage.getItem("currentGame")||"null"),this.currentGame?(console.log("[GamePlayManager][localStorage]",this.socketRoom,this.currentRoom,this.currentGame),this.primaryBtn.node.on(s.EventType.TOUCH_END,(function(){o.onClickPrimaryBtn(o.primaryBtn)}),this),this.initChoiceBtn(),null==(e=this.roundResultController)||e.node.on("replay",(function(){o.gameState=b.WaitingForPlayers})),this.nav.node.on("back",(function(){c.loadScene("game-lobby"),A.emit("ROOM_ACTION",{roomId:o.currentRoom.id,action:"LEAVE",socketRoom:o.socketRoom||""})})),this.gameState=b.WaitingForNextRound,this.pushSystemNoti("Welcome to Rock Paper Scissors!"),this.chatManager.node.on("send-message",(function(e){A.emit("GAME_CHAT",{socketRoom:o.socketRoom,gameRoomId:o.currentRoom.id,message:e})})),this.initPlayerData(),this.updatePlayerData((null==(t=this.currentGame)?void 0:t.players)||[]),A.listen("MESSAGE",(function(e){var t;(console.log("MESSAGE",e),"ANOTHER_SESSION_LOGIN"===e)&&(null==(t=o.modalReconnect)||t.show())})),A.listen("DISCONNECT",(function(e){var t;console.log("ROOM_ACTION",e),null==(t=o.modalReconnect)||t.show()})),A.listen("ROOM_ACTION",(function(e){o.handleSocketEventRoomAction(e)})),A.listen("GAME",(function(e){o.handleSocketEventGame(e)})),A.listen("GAME_STATE_CHANGED",(function(e){o.handleSocketEventGameStateChange(e)})),A.listen("GAME_CHAT",(function(e){o.handleSocketEventGameChat(e)}))):console.error("Not found currentGame in localstorage")):console.error("Not found currentRomm in localstorage")):console.error("Not found socket room in localstorage")},r.update=function(e){},r.onDestroy=function(){R.disableBackgroundRunning(),A.removeAllListeners()},r.initPlayerData=function(){var e=JSON.parse(h.localStorage.getItem("user-info")||"null");this.playerA.initData(e),this.playerA.setUserBalance({coin:100,coinSymbol:"tADA"});var t=JSON.parse(h.localStorage.getItem("currentUsers")||"[]").find((function(t){return t.walletAddress!==e.walletAddress}));t?this.playerB.initData(t):(console.log("player B do not in room"),this.playerB.initData({id:0,alias:"---",walletAddress:"addr_test1a...000",avatar:""})),this.playerB.setUserBalance({coin:0,coinSymbol:"tADA"})},r.initChoiceBtn=function(){var e,t,o,i=this;null==(e=this.getChoiceBtn(this.rockBtnNode))||e.onClick((function(){i.onClickChoice(d.Rock)})),null==(t=this.getChoiceBtn(this.paperBtnNode))||t.onClick((function(){i.onClickChoice(d.Paper)})),null==(o=this.getChoiceBtn(this.scissorsBtnNode))||o.onClick((function(){i.onClickChoice(d.Scissors)}))},r.getChoiceBtn=function(e){var t=null==e?void 0:e.getComponent(m);return t||null},r.setChoiceBtnInteractive=function(e){var t=e[0],o=e[1],i=e[2];this.getChoiceBtn(this.rockBtnNode).interactable=t,this.getChoiceBtn(this.paperBtnNode).interactable=o,this.getChoiceBtn(this.scissorsBtnNode).interactable=i},r.setChoiceBtnSelected=function(e){var t=e[0],o=e[1],i=e[2];this.getChoiceBtn(this.rockBtnNode).setSelected(t),this.getChoiceBtn(this.paperBtnNode).setSelected(o),this.getChoiceBtn(this.scissorsBtnNode).setSelected(i)},r.onClickPrimaryBtn=function(e){console.log("Click Ready Btn"),"READY"===e.type?(this.clip.onAudioQueue(3),e.interactable=!1,this.nav.interactable=!1,A.emit("GAME",{action:"READY",socketRoom:this.socketRoom,gameRoomId:this.currentRoom.id})):"CONFIRM"===e.type&&(e.interactable=!1,this.clip.onAudioQueue(3),this.playerA.setChoice(this.selectedChoice),A.emit("GAME",{action:"COMMIT",socketRoom:this.socketRoom,gameRoomId:this.currentRoom.id,data:{encryptedChoice:this.playerA.hashedChoice,txId:"tx_id_commit_from_client_test_"+this.playerA.choice}}))},r.handleGameStateChange=function(){var e=this;switch(console.log("[🎮] Game state change",this.gameState),console.table([{playerA:this.playerA,playerB:this.playerB}]),this.gameState){case b.WaitingForPlayers:console.log("Waiting for players",this.playerA),this.primaryBtn.interactable=!this.playerA.isReady,this.nav.interactable=!this.playerA.isReady,this.roundResultController.hide();break;case b.WaitingForChoices:this.primaryBtn.interactable=!this.playerA.hasMadeChoice,this.primaryBtn.setType("CONFIRM"),this.setChoiceBtnInteractive(this.playerA.hasMadeChoice?[!1,!1,!1]:[!0,!0,!0]),this.onClickChoice(this.selectedChoice),this.countdownController.show(),this.countdownController.setTime(this.currentGame.roundTimeoutMs/1e3+1),this.countdownController.startCoundown((function(){e.onCountdownFinished()})),this.nav.interactable=!1;break;case b.CommittingChoices:this.primaryBtn.setType("CONFIRM"),this.primaryBtn.interactable=!this.playerA.hasMadeChoice,this.setChoiceBtnInteractive(this.playerA.hasMadeChoice?[!1,!1,!1]:[!0,!0,!0]);break;case b.RevealingChoices:this.primaryBtn.interactable=!1,this.setChoiceBtnInteractive([!1,!1,!1]),A.emit("GAME",{action:"REVEAL",socketRoom:this.socketRoom,gameRoomId:this.currentRoom.id,data:{txId:"tx_id_reveal_from_client_test_"+this.playerA.choice,choice:this.playerA.choice,salt:this.playerA.salt}}),this.pushSystemNoti(this.playerA.userInfo.alias+" commited ["+N(this.playerA.hashedChoice,3,3)+"]"),this.playerB.hashedChoice&&this.pushSystemNoti(this.playerB.userInfo.alias+" commited ["+N(this.playerB.hashedChoice,3,3)+"]");break;case b.WaitingForPayout:this.playerA.isRevealed&&this.pushSystemNoti(this.playerA.userInfo.alias+" revealed ["+this.playerA.salt+"]"),this.playerB.isRevealed&&this.pushSystemNoti(this.playerB.userInfo.alias+" revealed ["+this.playerB.salt+"]"),this.pushSystemNoti("Waiting for payout...");break;case b.ShowRoundResult:if(this.countdownController.hide(),this.primaryBtn.interactable=!1,this.nav.interactable=!1,this.roundResultController.hide(),this.setChoiceBtnInteractive([!1,!1,!1]),this.setChoiceBtnSelected([!1,!1,!1]),console.log("[GamePlayManager][handleGameStateChange][ShowRoundResult]",this.playerA,this.playerB),this.playerA.choice!==d.None&&this.playerB.choice!==d.None){var t="WIN";t=this.playerA.choice===this.playerB.choice?"DRAW":this.playerA.choice===d.Rock&&this.playerB.choice===d.Paper||this.playerA.choice===d.Paper&&this.playerB.choice===d.Scissors||this.playerA.choice===d.Scissors&&this.playerB.choice===d.Rock?"LOSE":"WIN";var o=new v(this.currentRoom.betUnit,this.currentRoom.betAmount);this.roundResultController.show({playerA:this.playerA,playerB:this.playerB,status:t,betAmount:Number(o.toAda()),betUnitSymbol:o.chain.symbol})}break;case b.WaitingForNextRound:this.primaryBtn.setType("READY"),this.primaryBtn.interactable=!0,this.countdownController.hide(),this.countdownController.stopCountdown(),this.setChoiceBtnSelected([!1,!1,!1]),this.setChoiceBtnInteractive([!1,!1,!1]),this.playerA.reset(),this.playerB.reset(),this.pushSystemNoti("Preparing for next round...")}},r.onClickChoice=function(e){this.playerA.isReady?this.playerA.hasMadeChoice?console.log("Player A has made choice"):this.gameState===b.WaitingForChoices||this.gameState===b.CommittingChoices?(this.selectedChoice=e,e!==d.None&&(e===d.Rock?this.setChoiceBtnSelected([!0,!1,!1]):e===d.Paper?this.setChoiceBtnSelected([!1,!0,!1]):e===d.Scissors&&this.setChoiceBtnSelected([!1,!1,!0]))):console.warn("Game state not allow choice"):console.log("Player A not ready")},r.waitAllPlayersReady=function(){this.readyWatcher||(this.readyWatcher=!0,this.schedule(this.checkReadyStatus,.1))},r.checkReadyStatus=function(){this.playerA.isReady&&this.playerB.isReady&&(this.gameState=b.WaitingForChoices,this.unschedule(this.checkReadyStatus),this.readyWatcher=null)},r.onCountdownFinished=function(){},r.pushSystemNoti=function(e){var t;this.chatManager?null==(t=this.chatManager)||t.addMessage("Noti: ",e):console.log("Chat manager is not initialized")},r.handleSocketEventGame=function(e){var t=e.action,o=e.data;if("GET_STATE"===t){var i=o.game.players;this.updatePlayerData(i)}console.log("[GamePlayManager][handleSocketEventGame]: | "+t+" | ",o)},r.handleSocketEventRoomAction=function(e){var t=e.action,o=e.data;null!=o&&o.users&&h.localStorage.setItem("currentUsers",JSON.stringify((null==o?void 0:o.users)||[])),this.initPlayerData(),console.log("[GamePlayManager][handleSocketEventRoomAction]: | "+t+" | ",o)},r.handleSocketEventGameStateChange=function(e){var t=e.data,o=t.state,i=(t.oldState,t.players);t.currentRound;console.log("[GamePlayManager][handleSocketEventGameStateChange]: | "+o+" | ",e),this.updatePlayerData(i),this.gameState=o},r.handleSocketEventGameChat=function(e){var t,o=e.data,i=o.message,a=o.from;o.to,o.timestamp;null==(t=this.chatManager)||t.addMessage(a.alias,i)},r.updatePlayerData=function(e){var t=this;e.forEach((function(e){if(e.id===t.playerA.userInfo.walletAddress){if(!e.isReady)return void t.playerA.reset();if(t.playerA.ready(),e.choice&&t.playerA.setChoice(e.choice),e.commit){var o=e.commit.encryptedChoice;t.playerA.hashedChoice=o}if(e.reveal){var i=e.reveal,a=i.choice,n=i.salt;t.playerA.choice=a,t.playerA.salt=n,t.playerA.isRevealed=!0}}else if(e.id===t.playerB.userInfo.walletAddress){if(!e.isReady)return void t.playerB.reset();if(t.playerB.ready(),e.choice&&t.playerB.setChoice(e.choice),e.commit){var r=e.commit.encryptedChoice;t.playerB.hashedChoice=r}if(e.reveal){var l=e.reveal,s=l.choice,c=l.salt;t.playerB.choice=s,t.playerB.salt=c,t.playerB.isRevealed=!0}}}))},n(t,[{key:"gameState",get:function(){return this._gameState},set:function(e){this._gameState=e,this.handleGameStateChange()}}]),t}(u)).prototype,"primaryBtn",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=t(U.prototype,"nav",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V=t(U.prototype,"uiController",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=t(U.prototype,"modalReconnect",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(U.prototype,"chatManager",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t(U.prototype,"clip",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K=t(U.prototype,"rockBtnNode",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(U.prototype,"paperBtnNode",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(U.prototype,"scissorsBtnNode",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=t(U.prototype,"countdownController",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$=t(U.prototype,"roundResultController",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=t(U.prototype,"playerA",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),te=t(U.prototype,"playerB",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=U))||L));r._RF.pop()}}}));

System.register("chunks:///_virtual/index.ts",["cc","./lobby.ts","./player.ts"],(function(n){var t,e,i,o;return{setters:[function(n){t=n.cclegacy,e=n.sys},function(n){i=n.LobbyInteractionImpl},function(n){o=n.PlayerInteractionImpl}],execute:function(){t._RF.push({},"03334BVigVNPa5m++jP725m","index",void 0);n("GameInteraction",function(){function n(){this.player=n.getInstance("player"),this.lobby=n.getInstance("lobby")}return n.getInstance=function(n){var t={player:new o,lobby:new i}[n];return t?(window[n]||(window[n]=t),e.isBrowser?window[n]:null):null},n}());t._RF.pop()}}}));

System.register("chunks:///_virtual/index2.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){var t,o,r;e("GameApiNsp",void 0),n._RF.push({},"f6e334f3BdBmaMg5E0ZUM3p","index",void 0),o=t||(t=e("GameApiNsp",{})),r=function(){function e(e){this.functions={},this.windowInstance=void 0,this.windowInstance=e}var n=e.prototype;return n.setFunc=function(e,n){if("function"==typeof n)return this.functions[e]=n,this;throw new Error('Provided value for "'+e+'" is not a function')},n.call=function(e){if("function"==typeof this.functions[e]){for(var n,t=arguments.length,o=new Array(t>1?t-1:0),r=1;r<t;r++)o[r-1]=arguments[r];return console.log("[GameApi][call]: ","Function ["+e+"] ","Args: ",o),(n=this.functions)[e].apply(n,o)}throw new Error('Function "'+e+'" does not exist')},n.request=function(e,n){var t=this,o=void 0===n?{}:n,r=o.args,i=void 0===r?null:r,s=o.timeout,a=void 0===s?6e4:s;return new Promise((function(n,o){try{var r={protocol:"game-api",type:"request",payload:{fncName:e,args:i}};t.windowInstance.parent.postMessage(r,"*"),t.windowInstance.addEventListener("message",(function(t){if("game-api"===t.data.protocol){console.log("[GameApi][listen-message]: ",t.data);var r=t.data,i=r.type,s=r.payload;if("response"===i&&s.fncName===e)try{if(s.error)return void o(new Error("[GameApi][request]: "+s.error));var a=JSON.parse(s.result);n(a)}catch(e){o(new Error("[GameApi][request]: Error parsing response: "+e))}}})),setTimeout((function(){o(new Error('[GameApi][request]: Request "'+e+'" timed out'))}),a)}catch(e){o(e)}}))},n.response=function(e){console.log("[GameApi][mock-response]: ",e),this.windowInstance.postMessage(e,"*")},e}(),o.GameApi=r;e("gameApi",new t.GameApi(window));n._RF.pop()}}}));

System.register("chunks:///_virtual/lobby.ts",["./rollupPluginModLoBabelHelpers.js","cc","./base.ts"],(function(n){var t,o,e;return{setters:[function(n){t=n.inheritsLoose},function(n){o=n.cclegacy},function(n){e=n.BaseInteraction}],execute:function(){o._RF.push({},"27c57XJ659BGpIFYEyrIgTC","lobby",void 0);n("LobbyInteractionImpl",function(n){function o(){var t;return(t=n.call(this,{eventName:"lobby"})||this).emitter.on(t.eventName,(function(n){t.onMessage(n)})),t}t(o,n);var e=o.prototype;return e.createLobby=function(){console.log("[Default Interaction]")},e.joinLobby=function(){console.log("[Default Interaction]")},e.setLobbyItems=function(n){console.log("[Default Interaction]",n)},e.renderLobbyList=function(){console.log("[Default Interaction]")},e.setLoading=function(n){console.log("[Default Interaction]",n)},o}(e));o._RF.pop()}}}));

System.register("chunks:///_virtual/Lobby2.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index.ts","./LobbyItem.ts","./AudioControl.ts","./PlayerManager.ts","./request-factory.ts","./ModalInputPassword.ts","./socket-client.ts","./ModalReconnect.ts"],(function(t){var e,o,n,i,r,l,a,s,c,b,u,d,f,y,p,h,m,g,I,w,L,S,v,C,T,O,P;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,n=t.initializerDefineProperty,i=t.assertThisInitialized,r=t.asyncToGenerator,l=t.regeneratorRuntime},function(t){a=t.cclegacy,s=t._decorator,c=t.Node,b=t.ScrollView,u=t.Prefab,d=t.RichText,f=t.EditBox,y=t.sys,p=t.director,h=t.instantiate,m=t.UITransform,g=t.Size,I=t.Component},function(t){w=t.GameInteraction},function(t){L=t.LobbyItem},function(t){S=t.AudioControl},function(t){v=t.PlayerManager},function(t){C=t.RequestFactory},function(t){T=t.ModalInputPassword},function(t){O=t.socketClient},function(t){P=t.ModalReconnect}],execute:function(){var M,R,E,N,k,B,A,_,z,x,J,U,V,D,G,H,j,F,q,W,Z,K,Q,X,Y;a._RF.push({},"7bf59R6bxZA5rju9jctktEw","Lobby",void 0);var $=s.ccclass,tt=s.property;t("Lobby",(M=$("Lobby"),R=tt({type:S,tooltip:"add audio controller"}),E=tt(c),N=tt(c),k=tt(c),B=tt(b),A=tt(u),_=tt(d),z=tt({type:v,tooltip:"add player manager"}),x=tt(T),J=tt(P),U=tt(f),M((G=e((D=function(t){function e(){for(var e,o=arguments.length,r=new Array(o),l=0;l<o;l++)r[l]=arguments[l];return e=t.call.apply(t,[this].concat(r))||this,n(e,"clip",G,i(e)),n(e,"lobbyCreateBtn",H,i(e)),n(e,"lobbyTestBtn",j,i(e)),n(e,"lobbyTabBtn",F,i(e)),n(e,"lobbyScrollView",q,i(e)),n(e,"lobbyItemPrefab",W,i(e)),n(e,"loadingText",Z,i(e)),n(e,"playerManager",K,i(e)),n(e,"modalInputPassword",Q,i(e)),n(e,"modalReconnect",X,i(e)),n(e,"passwordEditbox",Y,i(e)),e.lobbyItems=[],e.lobbyInteraction=(new w).lobby,e.isLoading=!1,e}o(e,t);var a=e.prototype;return a.start=function(){var t,e,o;null==(t=this.lobbyCreateBtn)||t.on(c.EventType.TOUCH_END,this.createLobby,this),null==(e=this.lobbyTestBtn)||e.on(c.EventType.TOUCH_END,this.onClickTestBtn,this),null==(o=this.lobbyTabBtn)||o.on(c.EventType.TOUCH_END,this.onClickLobbyTabBtn,this)},a.update=function(t){},a.onLoad=function(){var t=r(l().mark((function t(){var e=this;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.setLoading(!0),C.getLobbyList().then((function(t){var o;console.log("fetchLobbyList",t),e.setLobbyItems(null==(o=t.data)?void 0:o.items),e.renderLobbyList()})).catch((function(t){console.log("fetchLobbyList",t)})).finally((function(){e.setLoading(!1)})),O.connected?console.log("socket connected"):(O.setAuth(y.localStorage.getItem("accessToken")||""),O.connect()),O.listen("MESSAGE",(function(t){var o;(console.log("MESSAGE",t),"ANOTHER_SESSION_LOGIN"===t)&&(null==(o=e.modalReconnect)||o.show())})),O.listen("DISCONNECT",(function(t){var o;console.log("ROOM_ACTION",t),null==(o=e.modalReconnect)||o.show()}));case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),a.onEnable=function(){this.fetchUserInfo()},a.fetchUserInfo=function(){var t,e=this,o=JSON.parse(y.localStorage.getItem("user-info")||"null");o&&null!=o&&o.id?null==(t=this.playerManager)||t.setUserInfo(o):C.fetchUserInfo().then((function(t){var o;(console.log("fetchUserInfo",t),null!=t&&t.data)&&(y.localStorage.setItem("user-info",JSON.stringify(t.data)),null==(o=e.playerManager)||o.setUserInfo(t.data))})).catch((function(t){console.log("fetchUserInfo",t),p.loadScene("start-scene")}))},a.createLobby=function(){console.log("Create Lobby")},a.onCickJoinLobby=function(t){var e,o=this;t.requiredPassword?(null==(e=this.modalInputPassword)||e.show(),this.modalInputPassword.node.on("confirm",(function(e){o.handleJoinLobby(t,e).then((function(){var t;null==(t=o.modalInputPassword)||t.hide(),p.loadScene("game-play")})).catch((function(t){var e;if("WRONG_PASSWORD"===t)null==(e=o.modalInputPassword)||e.setMessage("Password incorrect");else if("ROOM_IS_FULL"===t){var n;null==(n=o.modalInputPassword)||n.setMessage("Room is full")}else{var i;null==(i=o.modalInputPassword)||i.setMessage((null==t?void 0:t.message)||t||"Something went wrong. Please try again.")}}))})),this.modalInputPassword.node.once("cancel",(function(){var t;console.log("cancel"),null==(t=o.modalInputPassword)||t.hide()}))):this.handleJoinLobby(t).then((function(){p.loadScene("game-play")})).catch((function(t){console.log("handleJoinLobby",t)}))},a.handleJoinLobby=function(){var t=r(l().mark((function t(e,o){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return O.emit("ROOM_ACTION",{roomId:e.id,action:"LEAVE",socketRoom:"GAME."+e.code}),O.emit("ROOM_ACTION",{roomId:e.id,action:"JOIN",password:o}),t.abrupt("return",new Promise((function(t,e){O.listen("ROOM_ACTION",(function(o){"success"===o.status&&"JOIN"===o.action&&(y.localStorage.setItem("socket-room",o.data.socketRoom),y.localStorage.setItem("currentRoom",JSON.stringify(o.data.room)),y.localStorage.setItem("currentGame",JSON.stringify(o.data.game)),y.localStorage.setItem("currentUsers",JSON.stringify(o.data.users)),t(o.data)),"error"===o.status&&e(o.message)}))})));case 3:case"end":return t.stop()}}),t)})));return function(e,o){return t.apply(this,arguments)}}(),a.renderLobbyList=function(){if(console.log("[Cocos Script] Render Lobby List"),this.lobbyScrollView&&this.lobbyItemPrefab){var t=this.lobbyScrollView.content;t.removeAllChildren();for(var e=this.lobbyItems.length+1,o=0;o<e;o++)if(0!=o){var n=h(this.lobbyItemPrefab),i=Math.floor(o/4),r=o%4;n.setPosition(197*r+24*r,240*-i-24*i,0),this.initLobbyItem(n,this.lobbyItems[o-1]),t.addChild(n)}else t.addChild(this.lobbyCreateBtn),this.lobbyCreateBtn.setPosition(0,0,0);var l=240*Math.ceil(e/4)+24*Math.ceil(e/4);t.getComponent(m).setContentSize(new g(t.getComponent(m).width,l))}},a.setLobbyItems=function(t){this.lobbyItems=t},a.setVisibleLobbyList=function(t){this.lobbyScrollView&&(this.lobbyScrollView.node.active=t)},a.initLobbyItem=function(t,e){var o=t.getComponent(L);o&&(o.roomData=e,o.node.on("join-lobby",this.onCickJoinLobby,this))},a.setLoading=function(t){console.log("[Cocos Script] Set loading",t),this.isLoading=t,this.loadingText&&(this.setVisibleLobbyList(!t),this.loadingText.node.active=t)},a.onClickLobbyTabBtn=function(){this.lobbyInteraction.emitter.emit("lobby",{type:"onClickLobbyTabBtn"})},a.onClickTestBtn=function(){this.lobbyInteraction.emitter.emit("lobby",{type:"onClickTestBtn"})},e}(I)).prototype,"clip",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=e(D.prototype,"lobbyCreateBtn",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(D.prototype,"lobbyTestBtn",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(D.prototype,"lobbyTabBtn",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=e(D.prototype,"lobbyScrollView",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=e(D.prototype,"lobbyItemPrefab",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=e(D.prototype,"loadingText",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=e(D.prototype,"playerManager",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=e(D.prototype,"modalInputPassword",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=e(D.prototype,"modalReconnect",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=e(D.prototype,"passwordEditbox",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=D))||V));a._RF.pop()}}}));

System.register("chunks:///_virtual/LobbyItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./useFormat.ts","./currency.type.ts"],(function(t){var o,e,n,i,r,a,u,l,c,s,b,m;return{setters:[function(t){o=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,u=t.Node,l=t.RichText,c=t.Button,s=t.Component},function(t){b=t.formatString},function(t){m=t.CurrencyBalance}],execute:function(){var h,y,p,f,d,B,g,v,w,D,I;r._RF.push({},"ab037O/F8xE179dx/0cKCYH","LobbyItem",void 0);var k=a.ccclass,x=a.property;t("LobbyItem",(h=k("LobbyItem"),y=x(u),p=x(l),f=x(l),d=x(c),h((v=o((g=function(t){function o(){for(var o,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return o=t.call.apply(t,[this].concat(r))||this,n(o,"lockedIcon",v,i(o)),n(o,"lobbyShowedName",w,i(o)),n(o,"lobbyBetAmountText",D,i(o)),n(o,"joinButton",I,i(o)),o.roomData=null,o}e(o,t);var r=o.prototype;return r.onEnable=function(){this.joinButton&&this.joinButton.node.on(u.EventType.TOUCH_END,this.onClickJoinButton,this)},r.onLoad=function(){if(this.roomData){this.roomData.requiredPassword&&this.lockedIcon?this.lockedIcon.active=!0:this.lockedIcon.active=!1,this.lobbyShowedName&&(this.lobbyShowedName.string=b(this.roomData.customName,20,0));var t=new m(this.roomData.betUnit,this.roomData.betAmount).toAda(!0);this.lobbyBetAmountText&&(this.lobbyBetAmountText.string=t)}},r.update=function(t){},r.onClickJoinButton=function(){this.node.emit("join-lobby",this.roomData)},o}(s)).prototype,"lockedIcon",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=o(g.prototype,"lobbyShowedName",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=o(g.prototype,"lobbyBetAmountText",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=o(g.prototype,"joinButton",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=g))||B));r._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./BaseButton.ts","./PrimaryButton.ts","./SecondaryButton.ts","./BaseModal.ts","./chain.ts","./config.ts","./socket-client.ts","./index2.ts","./request-factory.ts","./choice.type.ts","./currency.type.ts","./game.type.ts","./room.type.ts","./socket-client.type.ts","./user.type.ts","./backgroundRunner.ts","./useFormat.ts","./base.ts","./index.ts","./lobby.ts","./player.ts","./AudioControl.ts","./CountdownController.ts","./GamePlayManager.ts","./Lobby2.ts","./ModalReconnect.ts","./PlayerManager.ts","./StartScene.ts","./ChatManager.ts","./ChoiceBtnScript.ts","./ModalResult.ts","./Navigation.ts","./Player2.ts","./PrimaryBtn.ts","./ResultCard.ts","./RoundResultController.ts","./ModalInputPassword.ts","./Avatar.ts","./ChoiceFrame.ts","./LobbyItem.ts","./MessageItem.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MessageItem.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,i,s,a,r,o,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,o=t.Label,c=t.Component}],execute:function(){var l,u,g,p,h,f,m;a._RF.push({},"971c6GA5NhJ6bhfcasOGhqp","MessageItem",void 0);var d=r.ccclass,y=r.property;t("MessageItem",(l=d("MessageItem"),u=y(o),g=y(o),l((f=e((h=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,i(e,"messageTitle",f,s(e)),i(e,"messageContent",m,s(e)),e.data={title:"",content:""},e}n(e,t);var a=e.prototype;return a.start=function(){},a.update=function(t){},a.onLoad=function(){this.messageTitle.string=this.data.title,this.messageContent.string=this.data.content},a.setMessage=function(t,e){this.messageTitle.string=t,this.messageContent.string=e,this.data.title=t,this.data.content=e},e}(c)).prototype,"messageTitle",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=e(h.prototype,"messageContent",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=h))||p));a._RF.pop()}}}));

System.register("chunks:///_virtual/ModalInputPassword.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PrimaryButton.ts","./SecondaryButton.ts","./BaseModal.ts"],(function(t){var n,o,i,e,r,s,a,l,u,c,p,d,f;return{setters:[function(t){n=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,e=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,a=t.EditBox,l=t.Label,u=t.RichText,c=t.Node},function(t){p=t.PrimaryButton},function(t){d=t.SecondaryButton},function(t){f=t.BaseModal}],execute:function(){var b,h,m,B,g,y,w,v,E,C,x,P,T;r._RF.push({},"a8bb08xcJ5Kyq+Yq8E/UFO8","ModalInputPassword",void 0);var M=s.ccclass,z=s.property;t("ModalInputPassword",(b=M("ModalInputPassword"),h=z(p),m=z(d),B=z(a),g=z(l),y=z(u),b((E=n((v=function(t){function n(){var n;return n=t.call(this,{showCloseButton:!1,showOverlay:!0})||this,i(n,"confirmButton",E,e(n)),i(n,"cancelButton",C,e(n)),i(n,"passwordEditbox",x,e(n)),i(n,"inputLabel",P,e(n)),i(n,"message",T,e(n)),n}o(n,t);var r=n.prototype;return r.start=function(){var n,o,i,e=this;t.prototype.start.call(this),null==(n=this.confirmButton)||null==(n=n.node)||n.on(c.EventType.TOUCH_END,this.onClickConfirmBtn,this),this.node.on("open",(function(){var t;e.message&&(e.message.string=""),e.confirmButton.interactable=!1,null==(t=e.passwordEditbox)||t.focus()})),null==(o=this.cancelButton)||null==(o=o.node)||o.on(c.EventType.TOUCH_END,this.onClickCancelBtn,this),null==(i=this.passwordEditbox)||null==(i=i.node)||i.on(a.EventType.TEXT_CHANGED,this.onInputPassword,this)},r.update=function(t){},r.onClickConfirmBtn=function(){var t;this.node.emit("confirm",(null==(t=this.passwordEditbox)?void 0:t.string)||"")},r.onClickCancelBtn=function(){this.node.emit("cancel")},r.onInputPassword=function(){var t;null!=(t=this.passwordEditbox)&&t.string&&this.passwordEditbox.string.length>0?this.confirmButton.interactable=!0:this.confirmButton.interactable=!1},r.setMessage=function(t){this.message&&(this.message.string=t)},n}(f)).prototype,"confirmButton",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=n(v.prototype,"cancelButton",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=n(v.prototype,"passwordEditbox",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=n(v.prototype,"inputLabel",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=n(v.prototype,"message",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=v))||w));r._RF.pop()}}}));

System.register("chunks:///_virtual/ModalReconnect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseModal.ts","./PrimaryButton.ts"],(function(t){var n,o,e,r,a,i,c,l,u;return{setters:[function(t){n=t.applyDecoratedDescriptor,o=t.inheritsLoose,e=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){a=t.cclegacy,i=t._decorator,c=t.Node},function(t){l=t.BaseModal},function(t){u=t.PrimaryButton}],execute:function(){var s,d,p,f,h;a._RF.push({},"4a7f0XhUqhK4Icwk+VDrUU+","ModalReconnect",void 0);var y=i.ccclass,B=i.property;t("ModalReconnect",(s=y("ModalReconnect"),d=B(u),s((h=n((f=function(t){function n(){for(var n,o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=t.call.apply(t,[this].concat(a))||this,e(n,"reloadButton",h,r(n)),n}o(n,t);var a=n.prototype;return a.start=function(){var n;t.prototype.start.call(this),null==(n=this.reloadButton)||null==(n=n.node)||n.on(c.EventType.TOUCH_END,this.onClickReloadBtn,this)},a.update=function(t){},a.onClickReloadBtn=function(){window.location.reload()},n}(l)).prototype,"reloadButton",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=f))||p));a._RF.pop()}}}));

System.register("chunks:///_virtual/ModalResult.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PrimaryButton.ts","./BaseModal.ts"],(function(t){var e,n,o,r,i,l,a,u,s;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){i=t.cclegacy,l=t._decorator,a=t.Node},function(t){u=t.PrimaryButton},function(t){s=t.BaseModal}],execute:function(){var c,p,y,d,h;i._RF.push({},"034861h+y5Ec6O2n9dZTuqU","ModalResult",void 0);var f=l.ccclass,B=l.property;t("ModalResult",(c=f("ModalResult"),p=B(u),c((h=e((d=function(t){function e(){var e;return e=t.call(this,{showCloseButton:!1,showOverlay:!0})||this,o(e,"replayButton",h,r(e)),e}n(e,t);var i=e.prototype;return i.start=function(){var e,n=this;t.prototype.start.call(this),null==(e=this.replayButton)||null==(e=e.node)||e.on(a.EventType.TOUCH_END,this.onClickReplayBtn,this),this.node.on("open",(function(){n.replayButton.interactable=!0}))},i.update=function(t){},i.onClickReplayBtn=function(){this.node.emit("replay")},e}(s)).prototype,"replayButton",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=d))||y));i._RF.pop()}}}));

System.register("chunks:///_virtual/Navigation.ts",["./rollupPluginModLoBabelHelpers.js","cc","./currency.type.ts"],(function(t){var e,n,o,a,i,r,c,u,l,s,p,f,d,h,v;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,a=t.assertThisInitialized,i=t.createClass},function(t){r=t.cclegacy,c=t._decorator,u=t.Button,l=t.RichText,s=t.Node,p=t.sys,f=t.tween,d=t.math,h=t.Component},function(t){v=t.CurrencyBalance}],execute:function(){var B,m,b,g,y,k,x,C,T;r._RF.push({},"dfc9d57NkxFJqFDFg1Po2Jb","Navigation",void 0);var D=c.ccclass,N=c.property;t("Navigation",(B=D("Navigation"),m=N(u),b=N(l),g=N(l),B((x=e((k=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i))||this,o(e,"navBackBtn",x,a(e)),o(e,"betAmountText",C,a(e)),o(e,"roomCodeText",T,a(e)),e}n(e,t);var r=e.prototype;return r.start=function(){},r.onLoad=function(){this.navBackBtn.node.on(s.EventType.TOUCH_END,this.onClickBackBtn,this)},r.update=function(t){},r.updateRoomData=function(){try{var t=JSON.parse(p.localStorage.getItem("currentRoom")||"null");if(!t)return;this.betAmountText.string="Bet Amount: "+new v(t.betUnit,t.betAmount).toAda(!0),this.roomCodeText.string="Room Code: "+t.code}catch(t){console.log("updateRoomData",t)}},r.onClickBackBtn=function(){this.node.emit("back")},i(e,[{key:"interactable",get:function(){return!!this.navBackBtn&&this.navBackBtn.interactable},set:function(t){this.navBackBtn&&(this.navBackBtn.interactable=t,t?(this.updateRoomData(),f(this.node).to(1,{x:-616,scale:d.v3(1,1,1)}).start()):f(this.node).to(1,{x:-1140,scale:d.v3(.9,.9,.9)}).start())}}]),e}(h)).prototype,"navBackBtn",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(k.prototype,"betAmountText",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=e(k.prototype,"roomCodeText",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=k))||y));r._RF.pop()}}}));

System.register("chunks:///_virtual/player.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"801e0kCtihEUZtdmdrX6X3v","player",void 0);t("PlayerInteractionImpl",function(){function t(){}var e=t.prototype;return e.setAvatar=function(t){console.log("[Default Interaction]",t)},e.setUserInfo=function(t){console.log("[Default Interaction]",t)},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/Player2.ts",["./rollupPluginModLoBabelHelpers.js","cc","./choice.type.ts","./sha256.mjs_cjs=&original=.js","./Avatar.ts","./sha256.js"],(function(t){var e,i,a,n,r,o,s,c,l,u,h,d,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,a=t.initializerDefineProperty,n=t.assertThisInitialized,r=t.createClass},function(t){o=t.cclegacy,s=t._decorator,c=t.RichText,l=t.Label,u=t.Component},function(t){h=t.Choice},null,function(t){d=t.Avatar},function(t){f=t.default}],execute:function(){var y,p,g,b,m,v,A,R,C,x,T;o._RF.push({},"b5a795j0DVFKZUuptb045zh","Player",void 0);var L=s.ccclass,S=s.property;t("Player",(y=L("Player"),p=S(c),g=S(c),b=S(d),m=S(l),y((R=e((A=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,a(e,"usernameText",R,n(e)),a(e,"coinAmountText",C,n(e)),a(e,"avatar",x,n(e)),a(e,"readyLabel",T,n(e)),e.userInfo={id:0,alias:"",walletAddress:"",avatar:"",createdAt:""},e.choice=h.None,e.salt=void 0,e.hashedChoice=void 0,e.isRevealed=!1,e.isReady=!1,e}i(e,t);var o=e.prototype;return o.start=function(){},o.update=function(t){},o.initData=function(t){var e,i=t.alias,a=(t.walletAddress,t.avatar);this.userInfo=t,this.usernameText.string=i,null==(e=this.avatar)||e.setAvatar(a),this.readyLabel.string="Waiting for ready...",this.coinAmountText.string=""},o.setUserBalance=function(t){this.coinAmountText.string=t.coin+" "+t.coinSymbol},o.reset=function(){this.choice=h.None,this.salt="",this.hashedChoice="",this.isRevealed=!1,this.isReady=!1,this.readyLabel.string="Waiting for ready..."},o.setChoice=function(t){this.choice=t,this.genSalt(),this.hashedChoice=f.sha256.hmac(this.salt,t.toString())},o.makeRandomChoice=function(){return[h.Rock,h.Paper,h.Scissors][Math.floor(3*Math.random())]},o.genSalt=function(){this.salt=Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)},o.ready=function(){this.isReady=!0,this.readyLabel.string="Ready"},r(e,[{key:"hasMadeChoice",get:function(){return this.hashedChoice&&this.choice!==h.None}}]),e}(u)).prototype,"usernameText",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(A.prototype,"coinAmountText",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(A.prototype,"avatar",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=e(A.prototype,"readyLabel",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=A))||v));o._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./useFormat.ts"],(function(e){var r,t,a,n,i,o,l,s,u,c,p,f,d,y;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,a=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){i=e.cclegacy,o=e._decorator,l=e.Sprite,s=e.RichText,u=e.Node,c=e.assetManager,p=e.SpriteFrame,f=e.Texture2D,d=e.Component},function(e){y=e.formatAddress}],execute:function(){var v,g,h,A,m,b,w,C,M,z,P;i._RF.push({},"64da7qcArZM0qEVPMsVIOYz","PlayerManager",void 0);var k=o.ccclass,D=o.property;e("PlayerManager",(v=k("PlayerManager"),g=D(l),h=D(s),A=D(s),m=D(s),v((C=r((w=function(e){function r(){for(var r,t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i))||this,a(r,"playerAvatar",C,n(r)),a(r,"username",M,n(r)),a(r,"walletAddress",z,n(r)),a(r,"userCoin",P,n(r)),r.userInfo={walletAddress:"",avatar:"",id:0,alias:"",createdAt:""},r}t(r,e);var i=r.prototype;return i.start=function(){},i.onLoad=function(){this.playerAvatar.node.on(u.EventType.TOUCH_END,this.onClickAvatar,this)},i.update=function(e){},i.setAvatar=function(e){var r=this;c.loadRemote(e,(function(e,t){if(e)console.error("Lỗi khi tải avatar:",e);else if(r.playerAvatar){var a=new p,n=new f;n.image=t,a.texture=n,r.playerAvatar.spriteFrame=a}}))},i.onClickAvatar=function(){console.log("Click avatar")},i.setUserInfo=function(e){this.userInfo=e,this.username.string=e.alias,this.walletAddress.string=y(e.walletAddress,{begin:6,last:4,splitBy:"..."}),this.setAvatar(e.avatar)},i.setUserBalance=function(e){this.userCoin.string=e.coin+" "+e.coinSymbol},r}(d)).prototype,"playerAvatar",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=r(w.prototype,"username",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=r(w.prototype,"walletAddress",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=r(w.prototype,"userCoin",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=w))||b));i._RF.pop()}}}));

System.register("chunks:///_virtual/PrimaryBtn.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,i,o,r,l,a,s,c,p,u,f,y,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized,r=e.createClass},function(e){l=e.cclegacy,a=e._decorator,s=e.Label,c=e.Node,p=e.UIOpacity,u=e.Animation,f=e.Color,y=e.Sprite,g=e.Component}],execute:function(){var h,b,d,m,C,N,v,D,_;l._RF.push({},"e9241A0pbBGZaEHslkZWy2J","PrimaryBtn",void 0);var F=a.ccclass,w=a.property;e("PrimaryBtn",(h=F("PrimaryBtn"),b=w(s),d=w(c),m=w(c),h((v=t((N=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return t=e.call.apply(e,[this].concat(r))||this,i(t,"label",v,o(t)),i(t,"effectNode",D,o(t)),i(t,"ringNode",_,o(t)),t._type="DEFAULT",t._interactable=!0,t}n(t,e);var l=t.prototype;return l.start=function(){},l.onEnable=function(){},l.onDisable=function(){},l.update=function(e){},l.setType=function(e){if(console.log("PrimaryBtnScript setType",e),this._type=e,this.label)return"DEFAULT"===e?(this.label.string="",void(this.node.getComponent(p).opacity=80)):"READY"===e?(this.label.string="READY",void(this.effectNode.getComponent(p).opacity=255)):"CONFIRM"===e?(this.label.string="CONFIRM",void(this.effectNode.getComponent(p).opacity=255)):void 0},r(t,[{key:"type",get:function(){return this._type}},{key:"interactable",get:function(){return this._interactable},set:function(e){var t,n,i,o;e!==this._interactable&&(this._interactable=e,this.effectNode&&(e?(null==(t=this.node.getComponent(u))||t.play(),null==(n=this.label.getComponent(u))||n.play(),this.label.color=new f("#C5FFF2"),this.label.outlineColor=new f("#05624E"),this.effectNode.getComponent(y).grayscale=!1,this.ringNode.getComponent(y).grayscale=!1):(null==(i=this.node.getComponent(u))||i.stop(),null==(o=this.label.getComponent(u))||o.stop(),this.label.color=new f("#D9D9D9"),this.label.outlineColor=new f("#777777"),this.effectNode.getComponent(y).grayscale=!0,this.ringNode.getComponent(y).grayscale=!0)))}}]),t}(g)).prototype,"label",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(N.prototype,"effectNode",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(N.prototype,"ringNode",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=N))||C));l._RF.pop()}}}));

System.register("chunks:///_virtual/PrimaryButton.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseButton.ts"],(function(t){var e,o,n,r,l,i,a;return{setters:[function(t){e=t.inheritsLoose,o=t.createClass},function(t){n=t.cclegacy,r=t._decorator,l=t.Node,i=t.Color},function(t){a=t.BaseButton}],execute:function(){var s;n._RF.push({},"d4056GK+IlLLLZLfx/Vg4SU","PrimaryButton",void 0);var u=r.ccclass;r.property,t("PrimaryButton",u("PrimaryButton")(s=function(t){function n(){var e;return(e=t.call(this)||this).defaultColor=new i("#C5FFF2"),e.disabledColor=new i("#999999"),e.hoveredColor=new i("#C5FFF2"),e.pressedColor=new i("#C5FFF2"),e.defaultOutlineColor=new i("#05624E"),e.disabledOutlineColor=new i("#999999"),e}e(n,t);var r=n.prototype;return r.start=function(){var t=this;this.node.on(l.EventType.TOUCH_MOVE,(function(){t.interactable&&(t.label.color=t.hoveredColor)}),this),this.node.on(l.EventType.TOUCH_END,(function(){t.interactable&&(t.label.color=t.pressedColor)}),this),this.interactable=this.button.interactable},r.update=function(t){},o(n,[{key:"interactable",get:function(){return this.button.interactable},set:function(t){t?(this.button.interactable=!0,this.label.color=this.defaultColor,this.label.outlineColor=this.defaultOutlineColor):(this.button.interactable=!1,this.label.color=this.disabledColor,this.label.outlineColor=this.disabledOutlineColor)}}]),n}(a))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/request-factory.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index2.ts","./config.ts"],(function(t){var e,n,r,u,o,i,c;return{setters:[function(t){e=t.asyncToGenerator,n=t.regeneratorRuntime,r=t.extends},function(t){u=t.cclegacy,o=t.sys},function(t){i=t.gameApi},function(t){c=t.default}],execute:function(){u._RF.push({},"98f1cGXLnhAx5edyj1oupdG","request-factory",void 0);var s=t("$fetch",function(){var t=e(n().mark((function t(e,u){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){var i=o.localStorage.getItem("accessToken");fetch(e,r({},u,{headers:r({},null==u?void 0:u.headers,{Authorization:i?"Bearer "+i:""})})).then((function(t){return t.json()})).then((function(e){t(e)})).catch((function(t){n(t)}))})));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}());t("RequestFactory",function(){function t(){}return t.getLobbyList=function(){return s(this.baseApiUrl+"/rooms")},t.createLobby=function(t){return s(this.baseApiUrl+"/rooms",{method:"POST",body:JSON.stringify(t)})},t.fetchUserInfo=function(){return s(this.baseApiUrl+"/auth")},t.fetchUserBalance=function(){return s(this.baseApiUrl+"/auth/balance")},t.depositBalance=function(t){return s(this.baseApiUrl+"/auth/deposit",{method:"POST",body:JSON.stringify(t)})},t.requestAuthorization=function(){var t=e(n().mark((function t(){var e;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.request("fetchAuthorization");case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t}()).baseApiUrl=c.baseApiUrl,u._RF.pop()}}}));

System.register("chunks:///_virtual/ResultCard.ts",["./rollupPluginModLoBabelHelpers.js","cc","./choice.type.ts","./Avatar.ts","./ChoiceFrame.ts"],(function(e){var t,r,a,i,n,o,l,s,c,u,p,h,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){n=e.cclegacy,o=e._decorator,l=e.Label,s=e.RichText,c=e.Color,u=e.Component},function(e){p=e.Choice},function(e){h=e.Avatar},function(e){d=e.ChoiceFrame}],execute:function(){var f,m,b,g,v,y,w,C,A,R,z,D,F;n._RF.push({},"fbb30dUbh1LtJC0Rom4klnh","ResultCard",void 0);var L=o.ccclass,E=o.property;e("ResultCard",(f=L("ResultCard"),m=E({type:h,tooltip:"add avatar"}),b=E(l),g=E(s),v=E(s),y=E({type:d,tooltip:"add choice frame"}),f((A=t((C=function(e){function t(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return t=e.call.apply(e,[this].concat(n))||this,a(t,"avatarNode",A,i(t)),a(t,"message",R,i(t)),a(t,"username",z,i(t)),a(t,"walletAddress",D,i(t)),a(t,"choiceFrame",F,i(t)),t.player={avatarUrl:"",username:"",walletAddress:"",choice:p.None,messageText:""},t}r(t,e);var n=t.prototype;return n.start=function(){},n.update=function(e){},n.init=function(e,t){var r,a;this.player=e,this.username.string=e.username,this.walletAddress.string=e.walletAddress,null==(r=this.choiceFrame)||r.showChoice(e.choice,"LOSE"===t),null==(a=this.avatarNode)||a.setAvatar(e.avatarUrl);var i={WIN:new c("#0E881C"),LOSE:new c("#DD3E0D"),DRAW:new c("#6B2E1B")};this.message.color=i[t],this.message.string=e.messageText},t}(u)).prototype,"avatarNode",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(C.prototype,"message",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(C.prototype,"username",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(C.prototype,"walletAddress",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(C.prototype,"choiceFrame",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=C))||w));n._RF.pop()}}}));

System.register("chunks:///_virtual/room.type.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"eee1fmPGVZIMo/w43TfK0x+","room.type",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/RoundResultController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioControl.ts","./ModalResult.ts","./ResultCard.ts","./ChoiceFrame.ts","./useFormat.ts"],(function(e){var t,r,i,a,o,l,n,s,u,c,p,d,h,m,y,f,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){o=e.cclegacy,l=e._decorator,n=e.SpriteFrame,s=e.Node,u=e.math,c=e.tween,p=e.Sprite,d=e.Component},function(e){h=e.AudioControl},function(e){m=e.ModalResult},function(e){y=e.ResultCard},function(e){f=e.ChoiceFrame},function(e){b=e.formatAddress}],execute:function(){var w,A,C,F,R,g,S,v,B,z,I,N,P,W,L,D,x,E,O,T,_,k,M,Q,U,H,j;o._RF.push({},"7b3521no29LR69iEPL3aHbO","RoundResultController",void 0);var q=l.ccclass,G=l.property;e("RoundResultController",(w=q("RoundResultController"),A=G({type:[n],tooltip:"add sprite frames: [rock, paper, scissors]",max:3,min:3}),C=G({type:[n],tooltip:"add sprite frames: [rock, paper, scissors]",max:3,min:3}),F=G(n),R=G(n),g=G(n),S=G({type:f,tooltip:"add choice frame for player A"}),v=G({type:f,tooltip:"add choice frame for player B"}),B=G(s),z=G({type:m,tooltip:"add modal result node"}),I=G({type:y,tooltip:"add card player A node"}),N=G({type:y,tooltip:"add card player B node"}),P=G({type:h,tooltip:"add audio controller"}),w((D=t((L=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return t=e.call.apply(e,[this].concat(o))||this,i(t,"choiceSpriteFrames",D,a(t)),i(t,"disabledChoiceSpriteFrames",x,a(t)),i(t,"winSpriteFrame",E,a(t)),i(t,"loseSpriteFrame",O,a(t)),i(t,"drawSpriteFrame",T,a(t)),i(t,"playerAChoiceFrame",_,a(t)),i(t,"playerBChoiceFrame",k,a(t)),i(t,"statusNode",M,a(t)),i(t,"modalResult",Q,a(t)),i(t,"cardPlayerA",U,a(t)),i(t,"cardPlayerB",H,a(t)),i(t,"clip",j,a(t)),t}r(t,e);var o=t.prototype;return o.onEnable=function(){var e,t=this;this.modalResult&&(this.modalResult.node.active=!1),null==(e=this.modalResult)||e.node.on("replay",(function(){t.node.emit("replay")}))},o.update=function(e){},o.show=function(e){var t,r,i=this;this.node.active=!0,this.node.scale=u.v3(0,0,0),c(this.node).to(.35,{scale:u.v3(1,1,1)},{easing:"cubicInOut"}).start(),"WIN"===e.status?(this.clip.onAudioQueue(0),this.playerAChoiceFrame.showChoice(e.playerA.choice,!1),this.playerBChoiceFrame.showChoice(e.playerB.choice,!0)):"DRAW"===e.status?(this.clip.onAudioQueue(1),this.playerAChoiceFrame.showChoice(e.playerA.choice,!1),this.playerBChoiceFrame.showChoice(e.playerB.choice,!1)):(this.clip.onAudioQueue(2),this.playerAChoiceFrame.showChoice(e.playerA.choice,!0),this.playerBChoiceFrame.showChoice(e.playerB.choice,!1)),this.showStatus(e.status);var a=e.betAmount+" "+e.betUnitSymbol,o="DRAW"===e.status?"draw":e.status.toLowerCase()+" "+a,l="WIN"===e.status?"lose "+a:"LOSE"===e.status?"win "+a:"draw";null==(t=this.cardPlayerA)||t.init({username:e.playerA.userInfo.alias,walletAddress:b(e.playerA.userInfo.walletAddress,{begin:6,last:4}),choice:e.playerA.choice,messageText:""+o,avatarUrl:e.playerA.userInfo.avatar},e.status),null==(r=this.cardPlayerB)||r.init({username:e.playerB.userInfo.alias,walletAddress:b(e.playerB.userInfo.walletAddress,{begin:6,last:4}),choice:e.playerB.choice,messageText:""+l,avatarUrl:e.playerB.userInfo.avatar},"WIN"===e.status?"LOSE":"LOSE"===e.status?"WIN":"DRAW"),setTimeout((function(){i.modalResult.show()}),3e3)},o.showStatus=function(e){if(this.statusNode){var t=this.statusNode.getComponent(p);t&&(t.spriteFrame="WIN"===e?this.winSpriteFrame:"DRAW"===e?this.drawSpriteFrame:this.loseSpriteFrame)}},o.hide=function(){this.node.active=!1},t}(d)).prototype,"choiceSpriteFrames",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),x=t(L.prototype,"disabledChoiceSpriteFrames",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),E=t(L.prototype,"winSpriteFrame",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O=t(L.prototype,"loseSpriteFrame",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=t(L.prototype,"drawSpriteFrame",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=t(L.prototype,"playerAChoiceFrame",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(L.prototype,"playerBChoiceFrame",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(L.prototype,"statusNode",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t(L.prototype,"modalResult",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(L.prototype,"cardPlayerA",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(L.prototype,"cardPlayerB",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(L.prototype,"clip",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W=L))||W));o._RF.pop()}}}));

System.register("chunks:///_virtual/SecondaryButton.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseButton.ts"],(function(o){var e,t,n,r,u;return{setters:[function(o){e=o.inheritsLoose},function(o){t=o.cclegacy,n=o._decorator,r=o.Color},function(o){u=o.BaseButton}],execute:function(){var c;t._RF.push({},"24687yM+KxOxLUZjDYV0C4g","SecondaryButton",void 0);var l=n.ccclass;n.property,o("SecondaryButton",l("SecondaryButton")(c=function(o){function t(){var e;return(e=o.call(this)||this).defaultColor=new r("#652615"),e.disabledColor=new r("#999999"),e.hoveredColor=new r("#913820"),e.pressedColor=new r("#652615"),e.defaultOutlineColor=new r("#652615"),e.disabledOutlineColor=new r("#999999"),e}return e(t,o),t}(u))||c);t._RF.pop()}}}));

System.register("chunks:///_virtual/socket-client.ts",["./rollupPluginModLoBabelHelpers.js","cc","./socket.io.mjs_cjs=&original=.js","./socket-client.type.ts","./config.ts","./socket.io.js"],(function(t){var e,n,s,o,c,i;return{setters:[function(t){e=t.createClass},function(t){n=t.cclegacy},null,function(t){s=t.SOCKET_EMIT_EVENTS,o=t.SOCKET_LISTEN_EVENTS},function(t){c=t.default},function(t){i=t.default}],execute:function(){n._RF.push({},"5c873ZZhEhED5L9Iqu0gI0M","socket-client",void 0);t("socketClient",new(function(){function t(){this.socket=void 0,this.socket=i(c.socketioWsUrl,{transports:["websocket","polling"],autoConnect:!1})}var n=t.prototype;return n.emit=function(t,e){var n=this.EmitEvents[t];this.socket.emit(n,e)},n.listen=function(t,e){var n=this.ListenEvents[t];this.socket.on(n,e)},n.removeListener=function(t,e){var n=this.ListenEvents[t];this.socket.off(n,e)},n.removeAllListeners=function(){this.socket.removeAllListeners()},n.listenOnce=function(t,e){var n=this.ListenEvents[t];this.socket.once(n,e)},n.setAuth=function(t){this.socket.auth={token:t}},n.connect=function(){this.socket.connect()},n.disconnect=function(){this.socket.disconnect()},e(t,[{key:"EmitEvents",get:function(){return s}},{key:"ListenEvents",get:function(){return o}},{key:"connected",get:function(){return this.socket.connected}}]),t}()));n._RF.pop()}}}));

System.register("chunks:///_virtual/socket-client.type.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"4f6e1lTxL9OwpxhPOfV/WeK","socket-client.type",void 0);e("SOCKET_EMIT_EVENTS",{ROOM_ACTION:"room_action",GAME:"game",GAME_CHAT:"game_chat"}),e("SOCKET_LISTEN_EVENTS",{CONNECT:"connect",DISCONNECT:"disconnect",ROOM_ACTION:"room_action",GAME:"game",GAME_STATE_CHANGED:"game_state_changed",MESSAGE:"message",GAME_CHAT:"game_chat"});t._RF.pop()}}}));

System.register("chunks:///_virtual/StartScene.ts",["./rollupPluginModLoBabelHelpers.js","cc","./add.js","./_baseGetTag.js","./_metaMap.js","./_root.js","./_LazyWrapper.js","./wrapperLodash.js","./_defineProperty.js","./assign.js","./assignIn.js","./assignInWith.js","./assignWith.js","./at.js","./attempt.js","./bind.js","./bindAll.js","./bindKey.js","./_baseToString.js","./_createRound.js","./_baseClone.js","./_LodashWrapper.js","./_isFlattenable.js","./_Stack.js","./_SetCache.js","./_equalByTag.js","./isArguments.js","./isBuffer.js","./isTypedArray.js","./_getTag.js","./_stringToPath.js","./curry.js","./curryRight.js","./defaults.js","./defaultsDeep.js","./defer.js","./delay.js","./difference.js","./differenceBy.js","./differenceWith.js","./flow.js","./flowRight.js","./intersection.js","./intersectionBy.js","./intersectionWith.js","./invoke.js","./invokeMap.js","./isArrayBuffer.js","./isDate.js","./isPlainObject.js","./isFinite.js","./isMap.js","./_baseIsNative.js","./_coreJsData.js","./isRegExp.js","./isSet.js","./memoize.js","./merge.js","./mergeWith.js","./method.js","./methodOf.js","./toArray.js","./omit.js","./over.js","./overArgs.js","./overEvery.js","./overSome.js","./parseInt.js","./partial.js","./partialRight.js","./pick.js","./pull.js","./pullAt.js","./rearg.js","./sortBy.js","./union.js","./unionBy.js","./unionWith.js","./_createSet.js","./without.js","./wrapperAt.js","./xor.js","./xorBy.js","./xorWith.js","./zip.js","./zipWith.js","./lodash.default.js","./AudioControl.ts","./PrimaryButton.ts","./index.ts","./BaseModal.ts","./request-factory.ts","./socket-client.ts"],(function(l){var e,n,t,o,r,i,s,a,u,c,g,d,j,p,f,h,m,y,b,B,v,T,A,_;return{setters:[function(l){e=l.applyDecoratedDescriptor,n=l.inheritsLoose,t=l.initializerDefineProperty,o=l.assertThisInitialized,r=l.createClass},function(l){i=l.cclegacy,s=l._decorator,a=l.ProgressBar,u=l.Label,c=l.Toggle,g=l.Button,d=l.Node,j=l.sys,p=l.director,f=l.resources,h=l.Animation,m=l.Component},function(l){y=l.default},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,function(l){b=l.AudioControl},function(l){B=l.PrimaryButton},function(l){v=l.GameInteraction},function(l){T=l.BaseModal},function(l){A=l.RequestFactory},function(l){_=l.socketClient}],execute:function(){var S,w,k,I,C,L,z,E,D,W,G,P,M,O,R,U,x;i._RF.push({},"f0348pd0H1OHYELM5qZEE2B","StartScene",void 0);var F=s.ccclass,H=s.property;l("StartScene",(S=F("StartScene"),w=H(B),k=H({type:b,tooltip:"add audio controller"}),I=H({type:a,tooltip:"loading progress bar"}),C=H({type:u,tooltip:"loading bar label"}),L=H({type:c,tooltip:"agree term toggle"}),z=H({type:T,tooltip:"add modal info"}),E=H(g),S((G=e((W=function(l){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e=l.call.apply(l,[this].concat(r))||this,t(e,"startGameBtn",G,o(e)),t(e,"clip",P,o(e)),t(e,"loadingBar",M,o(e)),t(e,"loadingLabel",O,o(e)),t(e,"agreeTermToggle",R,o(e)),t(e,"modalInfo",U,o(e)),t(e,"retryBtn",x,o(e)),e.isAuthenticated=!1,e}n(e,l);var i=e.prototype;return i.start=function(){var l,e;null==(l=this.startGameBtn)||l.node.on(d.EventType.TOUCH_END,this.initGame,this),null==(e=this.agreeTermToggle)||null==(e=e.node)||e.on(d.EventType.TOUCH_END,this.onClickAgreeTerm,this),new v},i.update=function(l){this.startGameBtn&&(this.startGameBtn.interactable=this.isEnableStartBtn)},i.onClickAgreeTerm=function(){var l;console.log("Click agree term",null==(l=this.agreeTermToggle)?void 0:l.isChecked)},i.onLoad=function(){console.log("OnLoad",y(1,2)),this.clip.onAudioLoop(0)},i.onEnable=function(){var l=this;this.preloadAllAssets(),A.requestAuthorization().then((function(l){return console.log("fetchAuthorization",l),j.localStorage.setItem("accessToken",l.accessToken),_.setAuth(l.accessToken),_.connect(),A.fetchUserInfo()})).then((function(e){if(console.log("fetchUserInfo",e),null==e||!e.data)throw l.isAuthenticated=!1,console.log("fetchUserInfo error",e),new Error("fetchUserInfo error");j.localStorage.setItem("user-info",JSON.stringify(e.data)),l.isAuthenticated=!0})).catch((function(e){var n,t;console.log("fetchAuthorization",e),j.localStorage.removeItem("accessToken"),j.localStorage.removeItem("user-info"),l.isAuthenticated=!1,console.log("this.modalInfo",l.modalInfo),null==(n=l.modalInfo)||n.show(),null==(t=l.retryBtn)||t.node.on(d.EventType.TOUCH_END,(function(){window.location.reload()}))}))},i.initGame=function(){var l;null!=(l=this.agreeTermToggle)&&l.isChecked?1===this.loadingBar.progress&&p.loadScene("game-lobby"):console.log("Please agree to the term")},i.preloadAllAssets=function(){var l=this;this.loadingBar.progress=0,this.loadingLabel.string="Loading... 0%",f.loadDir("",(function(e,n,t){var o=e/n;l.loadingBar.progress=o,l.loadingLabel.string="Loading... "+Math.floor(100*o)+"%"}),(function(e,n){var t;e?console.error("Failed to preload assets:",e):(l.loadingLabel.string="Click start now to play",null==(t=l.loadingLabel.getComponent(h))||t.play(),l.loadingBar.progress=1)}))},r(e,[{key:"isEnableStartBtn",get:function(){var l,e;return(null==(l=this.agreeTermToggle)?void 0:l.isChecked)&&1===(null==(e=this.loadingBar)?void 0:e.progress)&&this.isAuthenticated}}]),e}(m)).prototype,"startGameBtn",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(W.prototype,"clip",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=e(W.prototype,"loadingBar",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(W.prototype,"loadingLabel",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(W.prototype,"agreeTermToggle",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(W.prototype,"modalInfo",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(W.prototype,"retryBtn",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=W))||D));i._RF.pop()}}}));

System.register("chunks:///_virtual/useFormat.ts",["cc"],(function(t){var r;return{setters:[function(t){r=t.cclegacy}],execute:function(){t({formatAddress:function(t,r){void 0===r&&(r={begin:5,last:5,splitBy:"..."});if(!t)return"";var n=r,i=n.begin,e=void 0===i?5:i,s=n.last,u=void 0===s?5:s,o=n.splitBy,g=void 0===o?"...":o;if(t.length<=e+u)return t;var v=t.substring(0,e),a=t.substring(t.length-u);return v+g+a},formatString:function(t,r,n){void 0===r&&(r=5);void 0===n&&(n=5);if(!t)return"";if(t.length<=r+n)return t;var i=t.substring(0,r),e=t.substring(t.length-n);return i+"..."+e}}),r._RF.push({},"f6092dez11G+qjm/4vMkquA","useFormat",void 0),r._RF.pop()}}}));

System.register("chunks:///_virtual/user.type.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"1efb5WmjjJIKbAyyjQjVwk6","user.type",void 0),e._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});
//# sourceMappingURL=index.js.map